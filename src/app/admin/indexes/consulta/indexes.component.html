<ngx-spinner type="ball-scale-multiple"></ngx-spinner>

<div style="margin-bottom: 20px; margin-top: 5px;">
	<p class="title">Catalogo de Indices</p>
</div>

<mat-card>
    <mat-card-header fxLayout="row" fxLayout.xs="column">
        <div fxFlex="50" fxFlex.xs="100" fxLayout="column" fxLayoutAlign="center start" fxLayoutAlign.xs="center center">
            <mat-card-title>Lista de Indices</mat-card-title>
            <!-- <mat-card-subtitle>Please fill out all fields</mat-card-subtitle> -->
        </div>
        <div fxFlex="50" fxFlex.xs="100" fxLayoutAlign="end center" fxLayoutAlign.xs="center center">
            <button class="button button-nuevo" mat-raised-button >Nuevo Indice</button>            
        </div>
                
        </mat-card-header>
        <mat-card-content>
            <div>
                <p-table #dt1 scrollDirection="both" [scrollable]="true" scrollHeight="400px" [columns]="selectedColumns" [reorderableColumns]="true" [value]="products"  responsiveLayout="scroll" dataKey="id_mov" 
                [rows]="10" [showCurrentPageReport]="true" [rowsPerPageOptions]="[10,25,50,100]"
                [paginator]="true" currentPageReportTemplate="Mostrando {first} - {last} de {totalRecords} elementos"
                [globalFilterFields]="this._selectedColumnsFilter" styleClass="p-datatable-sm" >
                
                    <ng-template pTemplate="caption">
                        <div fxFlex="80" fxLayoutAlign="start center" fxLayoutGap="15px">
                            <!-- <div fxFlex="40">
                                <p-multiSelect [options]="cols" [(ngModel)]="selectedColumns" optionLabel="header"
                                    selectedItemsLabel="{0} columns selected" [style]="{minWidth: '300px'}" placeholder="Choose Columns">
                                </p-multiSelect>
                            </div> -->
                            <div fxFlex="40">
                                <button class="button-clear" pButton label="Clear" type="button" icon="pi pi-filter-slash" iconPos="left" (click)="clear(dt1)"></button>
                            </div>
                        </div>
                    </ng-template>
                    <ng-template pTemplate="header" let-columns>
                        <tr>
                            <th style="width:100px">
                                <p-tableHeaderCheckbox></p-tableHeaderCheckbox>
                            </th>
                            <th style="width:100px">Action</th>
                            <th style="width:150px" *ngFor="let col of columns" pReorderableColumn>
                                <!-- <p-columnFilter type="{{col.type}}" field="{{col.field}}" display="menu"></p-columnFilter> -->
                                {{col.header}}
                            </th>
                        </tr>
                    </ng-template>
                    <ng-template pTemplate="body" let-product let-columns="columns">
                        <tr [ngClass]="{'settled-row': product.settled === true || product.settled === 1 || product.settled === 'settled'}">
                            <td style="width:100px">
                                <p-tableCheckbox [value]="product"></p-tableCheckbox>
                            </td>
                            <td style="width:100px">
                                <button mat-icon-button matTooltip="Editar">                  
                                    <span class="material-icons" style="color:#1D4289">
                                        edit
                                    </span>                             
                                </button>                                                              
                            </td>
                            <td style="width:100px">
                                <button mat-icon-button matTooltip="Eliminar">                  
                                    <span class="material-icons" style="color:#1D4289">
                                        delete
                                    </span>                             
                                </button>                                                              
                            </td>
                            <td style="width:150px" *ngFor="let col of columns">
                                
                                <span *ngIf="col.type == 'date'">
                                    {{product[col.field] | date}}
                                </span>
                    
                                <span *ngIf="col.field == 'vol_daily' || col.field == 'vol_monthly'">
                                    {{product[col.field] | number}}
                                </span>    
                    
                                <span *ngIf="col.field == 'price'">
                                    {{product[col.field] | currency}}
                                </span>    
                                
                                <span *ngIf="col.type == 'text'">
                                    {{product[col.field]}}
                                </span>    
                    
                                <span *ngIf="col.type == 'boolean'">
                                    {{product[col.field]}}
                                </span>    
                                
                            </td>
                        </tr>
                    </ng-template>                                        
                </p-table>
            </div>
        </mat-card-content>
</mat-card>